<!DOCTYPE html>
<html>
<head>
	<title>IoP</title>
</head>
<body>
	<form>
		<input type="text" name=""><br/>
		<textarea></textarea><br/>
		<input id="radio-post" type="radio" name="req" value="POST" checked /><label for="radio-post">POST</label>
		<input id="radio-get" type="radio" name="req" value="GET" /><label for="radio-get">GET</label>
		<input type="submit" name="">
	</form>
			Pinterest Login:<br/>
			<br /><br /><br />
			<a href="https://api.pinterest.com/oauth/?response_type=code&redirect_uri=https://kaseyllabelle.github.io/IoP/callback.html&client_id=4924393521510627802&scope=read_public&state=pinpuppies">pinterest oauth</a>
					<br /><br /><br />

			<code>
			grant_type:'authorization_code',
			client_id:'4924393521510627802',
			client_secret:'953d71f8410650fb398fc0e22eb771318dcf6b0d33a80e3609f8dc73e5665758',
			code:'b49a7a88d9bd5e8a'
			</code>
	<script
	  src="https://code.jquery.com/jquery-3.2.1.min.js"
	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	  crossorigin="anonymous"></script>
	<script>

	function getURLParameter(name)
	{ return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [null, ''])[1].replace(/\+/g, '%20')) || null; }

		var fiveHundredPx = {
			oauth_callback: 'https://kaseyllabelle.github.io/IoP/callback.html'
		}
		var pinterest = {
				grant_type:'authorization_code',
				client_id:'4924393521510627802',
				client_secret:'953d71f8410650fb398fc0e22eb771318dcf6b0d33a80e3609f8dc73e5665758',
				code:'b49a7a88d9bd5e8a'};
		$('form').submit(function(e){
			event.preventDefault();
			let obj = {},
					tmp = '';

					if($('textarea').val().length)
					{
						tmp = $('textarea').val().trim().split(',');
						tmp.map((itm) => {
							let tmp2 = itm.split(/:(?=\')/g);
							// if(tmp2[1] && !tmp2[1].length){continue}
							obj[tmp2[0].trim()] = tmp2[1].replace(/\'/g,'').trim();
						})
					}
					// obj = JSON.stringify(obj)
					console.log('obj:',obj,tmp,$('input[type="radio"]:checked').val());
			$.ajax({
				method:$('input[type="radio"]:checked').val(),
				url:$('input[type="text"]').val(),
				data: obj
			},function(data){console.log(data);});
		});
	</script>
	<script>
		$(document).ready(()=>
		{
			//handle pinterest from start to finish
			if(getURLParameter('state') === 'pinpuppies')
			{
				$('input[type="text"]').val('https://api.pinterest.com/v1/oauth/token')
				$('textarea').val(`grant_type:'authorization_code',client_id:'4924393521510627802',client_secret:'953d71f8410650fb398fc0e22eb771318dcf6b0d33a80e3609f8dc73e5665758',code:'${getURLParameter('code')}'`)
				$('input[type="submit"]').click();
				alert('pinterest key is in the console (network tab)')
			}
		});
	</script>
</body>
</html>
